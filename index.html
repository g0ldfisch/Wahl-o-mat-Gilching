<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wahl-O-Mat Gilching 2026</title>
    <style>
        :root {
            --primary: #0056b3;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #333333;
        }
        body {
            font-family: sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        #app {
            max-width: 600px;
            width: 100%;
            background: var(--card);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .hidden { display: none; }
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s;
        }
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 12px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            transition: background 0.2s;
        }
        button:hover { background: #f0f0f0; }
        .btn-agree { border-left: 5px solid #28a745; }
        .btn-neutral { border-left: 5px solid #ffc107; }
        .btn-disagree { border-left: 5px solid #dc3545; }
        .result-item {
            margin-bottom: 15px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .party-bar {
            height: 20px;
            background: var(--primary);
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div id="app">
    <div id="view-start">
        <h1>Wahl-O-Mat Gilching 2026</h1>
        <p>Vergleichen Sie Ihre Positionen mit den Parteien basierend auf der politischen Analyse vom Februar 2026.</p>
        <button onclick="startQuiz()" style="background: var(--primary); color: white; width: 100%;">Analyse starten</button>
    </div>

    <div id="view-quiz" class="hidden">
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        <p id="question-count">These 1 von 30</p>
        <h2 id="question-text">Lädt...</h2>
        <div class="btn-group">
            <button class="btn-agree" onclick="handleAnswer(1)">Stimme zu</button>
            <button class="btn-neutral" onclick="handleAnswer(0)">Neutral</button>
            <button class="btn-disagree" onclick="handleAnswer(-1)">Lehne ab</button>
        </div>
    </div>

    <div id="view-results" class="hidden">
        <h1>Ihr Ergebnis</h1>
        <div id="results-list"></div>
        <button onclick="location.reload()" style="margin-top: 20px; width: 100%;">Neu starten</button>
    </div>
</div>

<script>
    const questions = [
        "Die Entwicklung der Ortsmitte (Glatze) ist notwendig für die Zukunft Gilchings.",
        "Gilching soll strikt bis 2035 klimaneutral werden.",
        "Neue Gewerbeflächen sind essenziell zur Sicherung der Steuereinnahmen.",
        "Beim Bauen soll das Schwammstadt-Prinzip Vorrang vor Betonflächen haben.",
        "Die Gemeinde soll primär auf technologische Lösungen wie Geothermie setzen.",
        "Der Ausbau von Kitas hat absolute Priorität vor anderen Infrastrukturprojekten.",
        "Digitalisierung der Verwaltung ist wichtiger als physische Bürgerservices.",
        "Das Wachstum Gilchings muss zum Erhalt des dörflichen Charakters begrenzt werden.",
        "Große Bauprojekte führen zu einem untragbaren Verkehrskollaps.",
        "Die Wärmeplanung birgt zu hohe finanzielle Risiken für die Bürger.",
        "Soziale Gerechtigkeit ist wichtiger als rein ökonomisches Wachstum.",
        "Ideologiegetriebene Verbotspolitik beim Bauen soll abgelehnt werden.",
        "Die Sanierung von Schulen ist die wichtigste soziale Aufgabe.",
        "Die Gemeinde soll die Expansionspolitik der letzten Jahre stoppen.",
        "Transparenz in Entscheidungsprozessen muss massiv erhöht werden.",
        "Klimaneutralität bis 2035 ist ein unverhandelbares Ziel.",
        "Wirtschaftliche Stabilität ist die Grundlage für alle anderen Projekte.",
        "Inklusion muss als harter Standortfaktor etabliert werden.",
        "Die Verkehrswende weg vom Auto muss beschleunigt werden.",
        "Die Gemeinde braucht eine fachliche Expertise (z.B. Bauingenieure) im Bürgermeisteramt.",
        "Die Förderung des Ehrenamts ist zentral für den sozialen Zusammenhalt.",
        "Das Bauvorhaben Glatze soll in der aktuell geplanten Dichte reduziert werden.",
        "Gewerbegebiet-Erweiterungen schaden dem Ortscharakter zu sehr.",
        "Menschliche Wärme ist in der Politik wichtiger als technokratische Effizienz.",
        "Die Einhaltung von Klimazielen (Kreistagsbeschluss 2005) ist zwingend.",
        "Technologischer Fortschritt ist der beste Weg für ökologische Anpassung.",
        "Bürgernahe Politik bedeutet vor allem, Großprojekte kritisch zu hinterfragen.",
        "Die Modernisierung der Verwaltung spart langfristig Kosten.",
        "Flächenentsiegelung ist wichtiger als neue Gewerbeansiedlungen.",
        "Die Gemeinde soll sich als Korrektiv gegen unkontrolliertes Wachstum sehen."
    ];

    const parties = [
        { name: "CSU", answers: [1, 0, 1, -1, 1, 0, 1, -1, -1, -1, 0, 1, 0, -1, 0, 0, 1, 0, -1, 1, 0, -1, -1, 0, 0, 1, -1, 1, -1, -1] },
        { name: "GRÜNE", answers: [0, 1, -1, 1, 0, 1, 0, 1, 1, 0, 1, -1, 1, 1, 1, 1, -1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1] },
        { name: "SPD", answers: [1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0] },
        { name: "BfG", answers: [-1, 0, -1, 0, -1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, -1, 0, 0, -1, 1, 1, 1, 1, 0, -1, 1, 0, 0, 1] }
    ];

    let currentQuestionIndex = 0;
    let userAnswers = [];

    function startQuiz() {
        document.getElementById('view-start').classList.add('hidden');
        document.getElementById('view-quiz').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        document.getElementById('question-text').innerText = questions[currentQuestionIndex];
        document.getElementById('question-count').innerText = "These " + (currentQuestionIndex + 1) + " von " + questions.length;
        const progress = ((currentQuestionIndex) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = progress + "%";
    }

    function handleAnswer(val) {
        userAnswers.push(val);
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showResults();
        }
    }

    function calculateMatch(partyAnswers, userAnswers) {
        let score = 0;
        let maxScore = userAnswers.length * 2;
        for (let i = 0; i < userAnswers.length; i++) {
            const partyVal = partyAnswers[i];
            const userVal = userAnswers[i];
            if (userVal === partyVal) {
                score += 2;
            } else if (userVal === 0 || partyVal === 0) {
                score += 1;
            }
        }
        return Math.round((score / maxScore) * 100);
    }

    function showResults() {
        document.getElementById('view-quiz').classList.add('hidden');
        document.getElementById('view-results').classList.remove('hidden');
        const resultsList = document.getElementById('results-list');
        const partyScores = parties.map(p => ({
            name: p.name,
            score: calculateMatch(p.answers, userAnswers)
        })).sort((a, b) => b.score - a.score);
        resultsList.innerHTML = partyScores.map(p => 
            "<div class='result-item'><strong>" + p.name + ": " + p.score + "%</strong><div class='party-bar' style='width: " + p.score + "%'></div></div>"
        ).join('');
    }
</script>
</body>
</html>
