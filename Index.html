<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wahl-O-Mat Gilching 2026</title>
    <style>
        :root {
            --primary: #0056b3;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #333333;
        }
        body {
            font-family: sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        #app {
            max-width: 600px;
            width: 100%;
            background: var(--card);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .hidden { display: none; }
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s;
        }
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 12px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            transition: background 0.2s;
        }
        button:hover { background: #f0f0f0; }
        .btn-agree { border-left: 5px solid #28a745; }
        .btn-neutral { border-left: 5px solid #ffc107; }
        .btn-disagree { border-left: 5px solid #dc3545; }
        .result-item {
            margin-bottom: 15px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .party-bar {
            height: 20px;
            background: var(--primary);
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div id="app">
    <div id="view-start">
        <h1>Wahl-O-Mat Gilching 2026</h1>
        <p>Vergleichen Sie Ihre Standpunkte mit den Parteien für die Gemeinderatswahl am 08. März 2026.</p>
        <button onclick="startQuiz()" style="background: var(--primary); color: white; width: 100%;">Jetzt starten</button>
    </div>

    <div id="view-quiz" class="hidden">
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        <p id="question-count">These 1 von 30</p>
        <h2 id="question-text">Lädt...</h2>
        <div class="btn-group">
            <button class="btn-agree" onclick="handleAnswer(1)">Stimme zu</button>
            <button class="btn-neutral" onclick="handleAnswer(0)">Neutral</button>
            <button class="btn-disagree" onclick="handleAnswer(-1)">Lehne ab</button>
            <button onclick="handleAnswer(null)">These überspringen</button>
        </div>
    </div>

    <div id="view-results" class="hidden">
        <h1>Ihr Ergebnis</h1>
        <div id="results-list"></div>
        <button onclick="location.reload()" style="margin-top: 20px; width: 100%;">Neu starten</button>
    </div>
</div>

<script>
    const questions = [
        "In der Karolingerstraße soll dauerhaft Tempo 30 gelten.",
        "Der Bau von zwei Windrädern im Gilchinger Forst soll beschleunigt werden.",
        "Die Bebauung der Glatze soll wie geplant mit 1400 Bewohnern erfolgen.",
        "Bei neuen Wohnbauprojekten muss eine Sozialquote von mindestens 30% gelten.",
        "Der Standort des neuen Skaterparks hinter der Kletterhalle soll bleiben.",
        "Die Gewerbesteuer soll zur Sanierung des Haushalts erhöht werden.",
        "Die Gemeinde soll das Schwammstadt-Konzept priorisieren.",
        "Der Ausbau der Fernwärme soll auch in Randgebieten verpflichtend geprüft werden.",
        "In Gilching sollen weitere Flächen für das Gewerbegebiet Süd versiegelt werden.",
        "Das Bahnhofsgebäude soll zeitnah saniert statt abgerissen werden.",
        "Die Gemeinde soll ein Vorkaufsrecht für Grundstücke aktiv nutzen.",
        "Der Jugendbeirat soll ein Budget von über 10.000 Euro erhalten.",
        "Radwege sollen zulasten von Parkplätzen ausgebaut werden.",
        "Die Ortsmitte soll weitgehend autofrei gestaltet werden.",
        "Gilching soll dem Bündnis lebenswerte Städte treu bleiben.",
        "Für den Windpark soll es ein exklusives Bürger-Beteiligungsmodell geben.",
        "Die Erweiterung des Gewerbeparks Nord soll gestoppt werden.",
        "Die Gemeinde soll mehr Personal in der Sozialberatung einstellen.",
        "Neue Baugebiete dürfen nur mit Photovoltaik-Pflicht genehmigt werden.",
        "Die Westumgehung soll an weiteren Stellen lärmschutzoptimiert werden.",
        "Gilching soll eine eigene kommunale Wohnungsbaugesellschaft gründen.",
        "Die Digitalisierung der Verwaltung hat Vorrang vor physischen Services.",
        "Kaltluftentstehungsgebiete müssen strikt von Bebauung frei bleiben.",
        "Die Vereinsförderung soll trotz Haushaltsnotlage ungekürzt bleiben.",
        "Das Projekt Wohnen gegen Hilfe soll finanziell stärker gefördert werden.",
        "Die Anbindung der Glatze darf nicht über den Starnberger Weg erfolgen.",
        "Die Gemeinde soll vermehrt Flächen für Agri-Photovoltaik ausweisen.",
        "Der Hebesatz für die Grundsteuer B soll gesenkt werden.",
        "Gilching soll sich für ein drittes Gymnasium im Kreis einsetzen.",
        "Streetworker-Stellen für Jugendliche sollen dauerhaft abgesichert werden."
    ];

    const parties = [
        { name: "CSU", answers: [-1, 0, 1, 0, -1, -1, 0, 0, 1, 1, -1, 0, -1, -1, -1, 1, -1, 0, 0, 1, -1, 1, 0, 1, 0, -1, 0, 0, 1, 0] },
        { name: "SPD", answers: [1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, -1, 1, 1, 0, 1, 0, 1, 1, 1, -1, 1, -1, 1, 1] },
        { name: "GRÜNE", answers: [1, 1, 0, 1, 1, 0, 1, 1, -1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, -1, 1, 1] },
        { name: "FW", answers: [0, 0, 0, 0, 0, -1, 0, 0, 1, 1, 0, 0, -1, -1, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, 0, 0, 0, 0, 1, 0] },
        { name: "BfG", answers: [1, 0, -1, 0, -1, -1, 0, 0, -1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, -1, 1, 1, 1, 1, 0, 0, 1, 1] },
        { name: "FDP", answers: [-1, 0, 1, -1, 0, -1, 0, -1, 1, 1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, 1, 0, 0, 0, -1, 0, 1, 1, 0] }
    ];

    let currentQuestionIndex = 0;
    let userAnswers = [];

    function startQuiz() {
        document.getElementById('view-start').classList.add('hidden');
        document.getElementById('view-quiz').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        document.getElementById('question-text').innerText = questions[currentQuestionIndex];
        document.getElementById('question-count').innerText = `These ${currentQuestionIndex + 1} von ${questions.length}`;
        const progress = ((currentQuestionIndex) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;
    }

    function handleAnswer(val) {
        userAnswers.push(val);
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showResults();
        }
    }

    function calculateMatch(partyAnswers, userAnswers) {
        let score = 0;
        let maxScore = 0;
        for (let i = 0; i < userAnswers.length; i++) {
            if (userAnswers[i] === null) continue;
            maxScore += 2;
            const partyVal = partyAnswers[i];
            const userVal = userAnswers[i];

            if (userVal === partyVal) {
                score += 2;
            } else if (userVal === 0 || partyVal === 0) {
                score += 1;
            } else {
                score += 0;
            }
        }
        return maxScore > 0 ? Math.round((score / maxScore) * 100) : 0;
    }

    function showResults() {
        document.getElementById('view-quiz').classList.add('hidden');
        document.getElementById('view-results').classList.remove('hidden');
        const resultsList = document.getElementById('results-list');
        
        const partyScores = parties.map(p => ({
            name: p.name,
            score: calculateMatch(p.answers, userAnswers)
        })).sort((a, b) => b.score - a.score);

        resultsList.innerHTML = partyScores.map(p => `
            <div class="result-item">
                <strong>${p.name}: ${p.score}%</strong>
                <div class="party-bar" style="width: ${p.score}%"></div>
            </div>
        `).join('');
    }
</script>

</body>
</html>
